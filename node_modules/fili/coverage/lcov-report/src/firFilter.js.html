<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/firFilter.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../prettify.css">
    <link rel="stylesheet" href="../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header high">
    <h1>Code coverage report for <span class="entity">src/firFilter.js</span></h1>
    <h2>
        Statements: <span class="metric">98.08% <small>(51 / 52)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">50% <small>(1 / 2)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">90.91% <small>(10 / 11)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">98.08% <small>(51 / 52)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; <a href="index.html">src/</a> &#187; firFilter.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">505</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">14</span>
<span class="cline-any cline-yes">14</span>
<span class="cline-any cline-yes">14</span>
<span class="cline-any cline-yes">1400</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">14</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">100005</span>
<span class="cline-any cline-yes">100005</span>
<span class="cline-any cline-yes">100005</span>
<span class="cline-any cline-yes">10000500</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">100005</span>
<span class="cline-any cline-yes">100005</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">1000</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1000</span>
<span class="cline-any cline-yes">1000</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1000</span>
<span class="cline-any cline-yes">100000</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1000</span>
<span class="cline-any cline-yes">1000</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1000</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">1000</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">'use strict';
&nbsp;
var _require = require('./utils');
&nbsp;
var runMultiFilter = _require.runMultiFilter;
var complex = _require.complex;
var evaluatePhase = _require.evaluatePhase;
&nbsp;
/**
 * Fir filter
 */
var FirFilter = function FirFilter(filter) {
  // note: coefficients are equal to input response
  var f = filter;
  var b = [];
  var cnt = 0;
  for (cnt = 0; cnt &lt; f.length; cnt++) {
    b[cnt] = {
      re: f[cnt],
      im: 0
    };
  }
&nbsp;
  var initZero = function initZero(cnt) {
    var r = [];
    var i;
    for (i = 0; i &lt; cnt; i++) {
      r.push(0);
    }
    return {
      buf: r,
      pointer: 0
    };
  };
&nbsp;
  var z = initZero(f.length - 1);
&nbsp;
  var doStep = function doStep(input, d) {
    d.buf[d.pointer] = input;
    var out = 0;
    for (cnt = 0; cnt &lt; d.buf.length; cnt++) {
      out += f[cnt] * d.buf[(d.pointer + cnt) % d.buf.length];
    }
    d.pointer = (d.pointer + 1) % d.buf.length;
    return out;
  };
&nbsp;
  var calcInputResponse = function calcInputResponse(input) {
    var tempF = initZero(f.length - 1);
    return runMultiFilter(input, tempF, doStep);
  };
&nbsp;
  var calcResponse = function calcResponse(params) {
    var Fs = params.Fs,
        Fr = params.Fr;
    // z = exp(j*omega*pi) = cos(omega*pi) + j*sin(omega*pi)
    // z^-1 = exp(-j*omega*pi)
    // omega is between 0 and 1. 1 is the Nyquist frequency.
    var theta = -Math.PI * (Fr / Fs) * 2;
    var h = {
      re: 0,
      im: 0
    };
    for (var i = 0; i &lt; f.length - 1; i++) {
      h = complex.add(h, complex.mul(b[i], {
        re: Math.cos(theta * i),
        im: Math.sin(theta * i)
      }));
    }
    var m = complex.magnitude(h);
    var res = {
      magnitude: m,
      phase: complex.phase(h),
      dBmagnitude: 20 * Math.log(m) * Math.LOG10E
    };
    return res;
  };
&nbsp;
  var self = {
    responsePoint: <span class="fstat-no" title="function not covered" >function responsePoint(params) {</span>
<span class="cstat-no" title="statement not covered" >      return calcResponse(params);</span>
    },
    response: function response(resolution) {
      resolution = resolution || <span class="branch-1 cbranch-no" title="branch not covered" >100;</span>
      var res = [];
      var cnt = 0;
      var r = resolution * 2;
      for (cnt = 0; cnt &lt; resolution; cnt++) {
        res[cnt] = calcResponse({
          Fs: r,
          Fr: cnt
        });
      }
      evaluatePhase(res);
      return res;
    },
    simulate: function simulate(input) {
      return calcInputResponse(input);
    },
    singleStep: function singleStep(input) {
      return doStep(input, z);
    },
    multiStep: function multiStep(input, overwrite) {
      return runMultiFilter(input, z, doStep, overwrite);
    },
    reinit: function reinit() {
      z = initZero(f.length - 1);
    }
  };
  return self;
};
&nbsp;
module.exports = FirFilter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL21hcmtlcnQvZGV2L2ZpbGkuanMvc3JjL2ZpckZpbHRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O2VBTVQsT0FBTyxDQUFDLFNBQVMsQ0FBQzs7SUFIcEIsY0FBYyxZQUFkLGNBQWM7SUFDZCxPQUFPLFlBQVAsT0FBTztJQUNQLGFBQWEsWUFBYixhQUFhOzs7OztBQU1mLElBQUksU0FBUyxHQUFHLFNBQVosU0FBUyxDQUFhLE1BQU0sRUFBRTs7QUFFaEMsTUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDO0FBQ2YsTUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ1gsTUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ1osT0FBSyxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxFQUFFO0FBQ25DLEtBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRztBQUNQLFFBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDO0FBQ1YsUUFBRSxFQUFFLENBQUM7S0FDTixDQUFDO0dBQ0g7O0FBRUQsTUFBSSxRQUFRLEdBQUcsU0FBWCxRQUFRLENBQWEsR0FBRyxFQUFFO0FBQzVCLFFBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNYLFFBQUksQ0FBQyxDQUFDO0FBQ04sU0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDeEIsT0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNYO0FBQ0QsV0FBTztBQUNMLFNBQUcsRUFBRSxDQUFDO0FBQ04sYUFBTyxFQUFFLENBQUM7S0FDWCxDQUFDO0dBQ0gsQ0FBQzs7QUFFRixNQUFJLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQzs7QUFFL0IsTUFBSSxNQUFNLEdBQUcsU0FBVCxNQUFNLENBQWEsS0FBSyxF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QUFFLEdBQUcsR0FBRyxVQUFVLEVBQUUsR0FBRyxFQUFFLEVBQUU7QUFDckMsV0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFlBQVksQ0FBQztBQUN0QixZQUFFLEVBQUUsQ0FBQztBQUNMLFlBQUUsRUFBRSxHQUFHO1NBQ1IsQ0FBQyxDQUFDO09BQ0o7QUFDRCxtQkFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ25CLGFBQU8sR0FBRyxDQUFDO0tBQ1o7QUFDRCxZQUFRLEVBQUUsa0JBQVUsS0FBSyxFQUFFO0FBQ3pCLGFBQU8saUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDakM7QUFDRCxjQUFVLEVBQUUsb0JBQVUsS0FBSyxFQUFFO0FBQzNCLGFBQU8sTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztLQUN6QjtBQUNELGFBQVMsRUFBRSxtQkFBVSxLQUFLLEVBQUUsU0FBUyxFQUFFO0FBQ3JDLGFBQU8sY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0tBQ3BEO0FBQ0QsVUFBTSxFQUFFLGtCQUFZO0FBQ2xCLE9BQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztLQUM1QjtHQUNGLENBQUM7QUFDRixTQUFPLElBQUksQ0FBQztDQUNiLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUMiLCJmaWxlIjoiL2hvbWUvbWFya2VydC9kZXYvZmlsaS5qcy9zcmMvZmlyRmlsdGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIge1xuICBydW5NdWx0aUZpbHRlcixcbiAgY29tcGxleCxcbiAgZXZhbHVhdGVQaGFzZVxufSA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcblxuLyoqXG4gKiBGaXIgZmlsdGVyXG4gKi9cbnZhciBGaXJGaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gIC8vIG5vdGU6IGNvZWZmaWNpZW50cyBhcmUgZXF1YWwgdG8gaW5wdXQgcmVzcG9uc2VcbiAgdmFyIGYgPSBmaWx0ZXI7XG4gIHZhciBiID0gW107XG4gIHZhciBjbnQgPSAwO1xuICBmb3IgKGNudCA9IDA7IGNudCA8IGYubGVuZ3RoOyBjbnQrKykge1xuICAgIGJbY250XSA9IHtcbiAgICAgIHJlOiBmW2NudF0sXG4gICAgICBpbTogMFxuICAgIH07XG4gIH1cblxuICB2YXIgaW5pdFplcm8gPSBmdW5jdGlvbiAoY250KSB7XG4gICAgdmFyIHIgPSBbXTtcbiAgICB2YXIgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgY250OyBpKyspIHtcbiAgICAgIHIucHVzaCgwKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGJ1ZjogcixcbiAgICAgIHBvaW50ZXI6IDBcbiAgICB9O1xuICB9O1xuXG4gIHZhciB6ID0gaW5pdFplcm8oZi5sZW5ndGggLSAxKTtcblxuICB2YXIgZG9TdGVwID0gZnVuY3Rpb24gKGlucHV0LCBkKSB7XG4gICAgZC5idWZbZC5wb2ludGVyXSA9IGlucHV0O1xuICAgIHZhciBvdXQgPSAwO1xuICAgIGZvciAoY250ID0gMDsgY250IDwgZC5idWYubGVuZ3RoOyBjbnQrKykge1xuICAgICAgb3V0ICs9IChmW2NudF0gKiBkLmJ1ZlsoZC5wb2ludGVyICsgY250KSAlIGQuYnVmLmxlbmd0aF0pO1xuICAgIH1cbiAgICBkLnBvaW50ZXIgPSAoZC5wb2ludGVyICsgMSkgJSAoZC5idWYubGVuZ3RoKTtcbiAgICByZXR1cm4gb3V0O1xuICB9O1xuXG4gIHZhciBjYWxjSW5wdXRSZXNwb25zZSA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHZhciB0ZW1wRiA9IGluaXRaZXJvKGYubGVuZ3RoIC0gMSk7XG4gICAgcmV0dXJuIHJ1bk11bHRpRmlsdGVyKGlucHV0LCB0ZW1wRiwgZG9TdGVwKTtcbiAgfTtcblxuICB2YXIgY2FsY1Jlc3BvbnNlID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgIHZhciBGcyA9IHBhcmFtcy5GcyxcbiAgICAgIEZyID0gcGFyYW1zLkZyO1xuICAgIC8vIHogPSBleHAoaipvbWVnYSpwaSkgPSBjb3Mob21lZ2EqcGkpICsgaipzaW4ob21lZ2EqcGkpXG4gICAgLy8gel4tMSA9IGV4cCgtaipvbWVnYSpwaSlcbiAgICAvLyBvbWVnYSBpcyBiZXR3ZWVuIDAgYW5kIDEuIDEgaXMgdGhlIE55cXVpc3QgZnJlcXVlbmN5LlxuICAgIHZhciB0aGV0YSA9IC1NYXRoLlBJICogKEZyIC8gRnMpICogMjtcbiAgICB2YXIgaCA9IHtcbiAgICAgIHJlOiAwLFxuICAgICAgaW06IDBcbiAgICB9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZi5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGggPSBjb21wbGV4LmFkZChoLCBjb21wbGV4Lm11bChiW2ldLCB7XG4gICAgICAgIHJlOiBNYXRoLmNvcyh0aGV0YSAqIGkpLFxuICAgICAgICBpbTogTWF0aC5zaW4odGhldGEgKiBpKVxuICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIgbSA9IGNvbXBsZXgubWFnbml0dWRlKGgpO1xuICAgIHZhciByZXMgPSB7XG4gICAgICBtYWduaXR1ZGU6IG0sXG4gICAgICBwaGFzZTogY29tcGxleC5waGFzZShoKSxcbiAgICAgIGRCbWFnbml0dWRlOiAyMCAqIE1hdGgubG9nKG0pICogTWF0aC5MT0cxMEVcbiAgICB9O1xuICAgIHJldHVybiByZXM7XG4gIH07XG5cbiAgdmFyIHNlbGYgPSB7XG4gICAgcmVzcG9uc2VQb2ludDogZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgcmV0dXJuIGNhbGNSZXNwb25zZShwYXJhbXMpO1xuICAgIH0sXG4gICAgcmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICByZXNvbHV0aW9uID0gcmVzb2x1dGlvbiB8fCAxMDA7XG4gICAgICB2YXIgcmVzID0gW107XG4gICAgICB2YXIgY250ID0gMDtcbiAgICAgIHZhciByID0gcmVzb2x1dGlvbiAqIDI7XG4gICAgICBmb3IgKGNudCA9IDA7IGNudCA8IHJlc29sdXRpb247IGNudCsrKSB7XG4gICAgICAgIHJlc1tjbnRdID0gY2FsY1Jlc3BvbnNlKHtcbiAgICAgICAgICBGczogcixcbiAgICAgICAgICBGcjogY250XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZXZhbHVhdGVQaGFzZShyZXMpO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9LFxuICAgIHNpbXVsYXRlOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgIHJldHVybiBjYWxjSW5wdXRSZXNwb25zZShpbnB1dCk7XG4gICAgfSxcbiAgICBzaW5nbGVTdGVwOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgIHJldHVybiBkb1N0ZXAoaW5wdXQsIHopO1xuICAgIH0sXG4gICAgbXVsdGlTdGVwOiBmdW5jdGlvbiAoaW5wdXQsIG92ZXJ3cml0ZSkge1xuICAgICAgcmV0dXJuIHJ1bk11bHRpRmlsdGVyKGlucHV0LCB6LCBkb1N0ZXAsIG92ZXJ3cml0ZSk7XG4gICAgfSxcbiAgICByZWluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHogPSBpbml0WmVybyhmLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHNlbGY7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZpckZpbHRlcjtcbiJdfQ==</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Fri Oct 28 2016 16:12:16 GMT+0200 (CEST)</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
